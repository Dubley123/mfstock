# ==================== (一) 数据路径配置 ====================
# (均以 project_root 的相对路径表示)
paths:
  data_dir: "data"        # 所有源数据文件存放的根目录
  output_dir: "output"    # 模型训练和预测结果输出目录

# ==================== (二) 数据集配置 ====================
dataset:
  # 特征文件路径（相对于 data_dir）
  feature_files:
    monthly: "feature/feature_monthly.parquet"
    weekly: "feature/feature_weekly.parquet"
  
  # 目标文件路径（相对于 data_dir）
  target_files:
    monthly: "target/target_monthly.parquet"
    weekly: "target/target_weekly.parquet"

  # 时间和股票列名
  time_col: "TradingDate"
  stkcd_col: "Stkcd"
  
  # 特征预处理器配置
  processor:
    nan_handler: "median"  # NaN处理方式
    outlier_handler: "mad"  # 异常值处理
    norm_handler: "zscore"  # 归一化方式

# ==================== (三) DataLoader配置 ====================
dataloader:
  batch_size: 1024
  shuffle_train: true  # 训练集是否打乱
  num_workers: 0  # 数据加载线程数（Windows建议设为0）

# ==================== (四) 滚动窗口配置 ====================
rolling_window:
  # 各频率的 lookback 窗口长度
  lookback_windows:
    monthly: "12m"  # 12个月
    weekly: "8w"  # 8周
    
  train_window: "5y"    # 训练集窗口长度
  val_window: "2y"      # 验证集窗口长度
  test_window: "1y"     # 测试集窗口长度
  test_start_time: "2018-01-01"  # 测试集起始时间
  rebalance_freq: "1m"  # 调仓频率

# ==================== (五) 模型配置 ====================
model:
  # 全局默认参数
  d_model: 128    # Embedding维度
  nhead: 4        # 注意力头数
  num_layers: 2   # Transformer层数
  dropout: 0.1
  fusion_method: "concat"  # 各频率向量拼接方法: 'concat'/'weighted'
  
  # 各频率模型的特定配置（可选，覆盖全局默认值）
  frequencies:
    monthly:
      d_model: 128
      num_layers: 2
    weekly:
      d_model: 128
      num_layers: 2

# ==================== (六) 训练配置 ====================
training:
  # 优化器配置
  learning_rate: 1.0e-4
  weight_decay: 0.01
  
  # 训练轮数
  epochs: 50            # 若尚未保存模型文件，表示每个窗口模型的训练轮数
  additional_epochs: 0  # 若已保存模型，表示在已有模型基础上追加训练的轮数
  
  # 早停配置
  patience: 10          # 早停耐心值
  
  # 是否详细输出
  verbose: true

# ==================== (七) 设备配置 ====================
runtime:
  device: "cuda"  # 'cuda' 或 'cpu'
  seed: 42  # 随机种子
